<h2>Positions Report</h2>

<table>
  {% tablerow field in shop.metafields.acf_settings.customer.fields %}
    {{ field.label }}
  {% endtablerow %}
  {% for position in customer.metafields.position.coffee %}
    {% assign coffee = all_products[position].title %}

    {% if all_products[position].variants.first.inventory_management == "shopify" %}
      {% if all_products[position].variants.first.inventory_quantity > 0 %}
  Only <span class="devStock">{{ all_products[position].variants.first.inventory_quantity }}</span> left!
    {% else %}
       The product is out of stock
    {% endif %}
  {% else %}
    This product is available
 {% endif %}
    
    {% assign i = forloop.index0 %}
    <tr>
      {% for field in shop.metafields.acf_settings.customer.fields %}
        {% assign col_name = field.name %}
        {% assign col_value = customer.metafields.position[col_name] %}
        {% if col_name == 'coffee' %}
          <td>{{ coffee }}</td>
        {% else %}
          <td>{{ col_value[i] }}</td>
        {% endif %}
      {% endfor %}
    </tr>
  {% endfor %}
</table>
