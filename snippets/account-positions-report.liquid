<h2>Positions Report</h2>

<table>
  <tr>
    {% for field in shop.metafields.acf_settings.customer.fields %}   
      <th>{{ field.label }}</th>
    {% endfor %}
  </tr>

  {% for position in customer.metafields.position.coffee %}
    
    {% assign words = position | split: '-' %}
    {% assign i = forloop.index0 %}
    {% assign position_status = customer.metafields.position.status[i] %}
    {% assign position_booked = customer.metafields.position.booked[i] %}
    {% assign position_balance = customer.metafields.position.balance[i] %}  
    {% capture titlecase_position %}
      {% for word in words %}
        {{ word | capitalize }}
      {% endfor %}
    {% endcapture %}

    <tr>
      {% for field in shop.metafields.acf_settings.customer.fields %} 
        <td>{{ field.value.i }}</td>
      {% endfor %}
      <td>{{ all_products[position].title }}</td>
      <td>{{ position_status }}</td>
      <td>{{ position_booked }}</td>
      <td>{{ position_balance }}</td>
    </tr>

    
  {% endfor %}
  
</table>



(location: 'snippets/account-positions-report.liquid')